---
title: immutable.js ì•Œì•„ë³´ê¸°
categories: javascript
tags:
  - Javascript
  - immutable.js
keywords:
  - Javascript
  - library
date: 2017-06-11 15:30:30
---

### Immutable.js ë€? 

Reactë¥¼ ì ‘í–ˆì„ ë•Œ immutable.jsë„ ê°™ì´ ì•Œ ë˜ì—ˆëŠ”ë°, ë‹¹ì‹œì—ëŠ” ì •í™•íˆ ì™œ í•„ìš”í•œì§€ ëª°ëìŠµë‹ˆë‹¤. 
í•˜ì§€ë§Œ ëª‡ ë²ˆ ë³´ë‹¤ ë³´ë‹ˆ ê·¸ ì´ìœ ë¥¼ ì•Œê²Œ ë˜ì—ˆê³ , ì œê°€ ì´í•´í•œ ë¶€ë¶„ê³¼ ì‚¬ìš©ë²•ì„ ì •ë¦¬í•´ë³´ë ¤ê³  í•©ë‹ˆë‹¤.

<!-- more -->

#### ê°ì²´ì˜ ë¶ˆë³€ì„±

ì²˜ìŒ 'immutable:ë¶ˆë³€ì„±'ì´ë€ ë‹¨ì–´ëŠ” ë‚¯ì„¤ê³  ë¨¸ë¦¬ì— ì˜ ì™€ë‹¿ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
ë¶ˆë³€ì„±...ë¶ˆë³€ì„±... ë°œìŒë„ í˜ë“­ë‹ˆë‹¤. ğŸ˜§

ì €ëŠ” ë¨¸ë¦¬ê°€ ì¢‹ì§€ ì•Šì€ ê´€ê³„ë¡œ í•œë²ˆì€ ë” í’€ì–´ì„œ ì´í•´í•´ì•¼ í–ˆìŠµë‹ˆë‹¤. 

> ë‚´ê°€ ë§Œë“œëŠ” ê°ì²´ëŠ” ì ˆëŒ€ ë³€í•˜ì§€ ì•Šì•„, ê·¸ëŸ¬ë‹ˆê¹Œ ìˆ˜ì •í•˜ë ¤ë©´ ë°˜ë“œì‹œ ë‹¤ë¥¸ ê±¸ í•˜ë‚˜ ìƒˆë¡œ ë§Œë“¤ì–´ì•¼ í•´!

Reactì—ì„œëŠ” state í˜¹ì€ propsì— ë³€í™”ê°€ ê°ì§€ë˜ë©´ ì»´í¬ë„ŒíŠ¸ë¥¼ ë¦¬ëœë”ë§í•©ë‹ˆë‹¤.

{% hl_text danger %}
ê·¸ëŸ°ë° ë ˆí¼ëŸ°ìŠ¤ ê°’ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê°€ì§€ê³  ìˆëŠ” ì •ë³´ë“¤ì€ ê°’ì´ ë‹¬ë¼ì ¸ë„, ë ˆí¼ëŸ°ìŠ¤ê°€ ê°™ê¸° ë•Œë¬¸ì— ReactëŠ” ê°’ì˜ ë³€í™”ë¥¼ ì¸ì§€í•˜ì§€ ëª»í•©ë‹ˆë‹¤.
{% endhl_text %}

ê·¸ë˜ì„œ ê°ì²´ë¥¼ ìƒˆë¡œ ë§Œë“¤ì–´ì£¼ì–´ì•¼ í•˜ëŠ”ë° ì´ë•Œ immutable.jsì„ í†µí•´ ë”ìš± ì†ì‰½ê²Œ ë°ì´í„°ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### Without immutable.js

ìš°ì„  immutable.js ì—†ì´ ê°’ì„ ìˆ˜ì •í•˜ëŠ” ì˜ˆì œë¥¼ í•œë²ˆ í™•ì¸í•´ë³´ì‹œì£ .

Reactì—ì„œëŠ” ìœ„ì—ë„ ì–¸ê¸‰í–ˆë“¯ ë ˆí¼ëŸ°ìŠ¤ë¥¼ í™œìš©í•˜ëŠ” ë°ì´í„°ì˜ ê²½ìš°ì—ëŠ” ìƒˆë¡œìš´ ê°’ì„ ë§Œë“¤ì–´ ì—°ê²°í•´ì£¼ì–´ì•¼ í•˜ëŠ”ë°, ë‹¤ìŒ ì˜ˆì œì™€ ê°™ì´ ë°ì´í„°ê°€ ë°°ì—´ì¸ ê²½ìš° íŠ¹ì • idx ë‚´ë¶€ì˜ ê°’ì„ ë³€ê²½í•  ë•ŒëŠ” ì•„ë˜ì™€ ê°™ì´ ì ìš©í•´ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```javascript
Items: [
    ...Items.slice(0, idx),
    {
      ...item,
      tempValue: !item.tempValue
    },
    ...Items.slice(idx + 1, Items.length)
]
```

1. ê¸°ì¡´ ë°°ì—´ì—ì„œ slice()ë¥¼ ì‚¬ìš©í•´ idxê¹Œì§€ ë°°ì—´ì„ ìë¥¸ë‹¤.
2. ìˆ˜ì •í•  idxì˜ ë°ì´í„°ë¥¼ ìˆ˜ì •í•œë‹¤.
3. ìˆ˜ì •í•œ idx ì´í›„ì— ë°ì´í„°ë¥¼ slice() í†µí•´ ìë¥¸ë‹¤.
4. 3ê°œì˜ ì‘ì—… ëœ ë°ì´í„°ë¥¼ í•˜ë‚˜ì˜ ë°°ì—´ì„ ë§Œë“¤ì–´ ë‹¤ì‹œ ê¸°ì¡´ ë³€ìˆ˜ì— ë„£ì–´ì¤€ë‹¤.

{% alert warning %}
ë‹¨ìˆœíˆ ê°’ì„ ë³€ê²½í•´ì£¼ëŠ” ë¶€ë¶„ì¸ë° ë§¤ìš° ë²ˆê±°ë¡œìš¸ ë¿ë§Œ ì•„ë‹ˆë¼, ë°ì´í„°ê°€ êµ¬ì¡°ê°€ ë³µì¡í•˜ê±°ë‚˜ ë§ì„ ë•ŒëŠ” ë”ìš± ë§ì€ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©í•˜ê²Œ ë  ê²ƒì…ë‹ˆë‹¤.
{% endalert %}


```javascript
Items[idx].tempValue = !Items[idx].tempValue;
```

ì´ë ‡ê²Œ ì‚¬ìš©í•´ë„ ì •ìƒì‘ë™ë˜ë©´ ì°¸ ì¢‹ì„ í…ë°ìš”? ğŸ˜


#### Use immutable.js

immutable ì½”ë“œë¥¼ ì“°ê¸° ì „ì—” 8ì¤„ì˜ ì½”ë“œê°€ 3ì¤„ë¡œ ì¤„ì—ˆìŠµë‹ˆë‹¤.

```javascript
Items = Itmes.update(idx, (item) => {
   return item.set('tempValue', !item.get('tempvalue')); 
});
```

ê°„ë‹¨íˆ ì„¤ëª…í•˜ë©´, immutable.jsì—ì„œ ì œê³µë˜ëŠ” {% hl_text orange %}update{% endhl_text %}ë¥¼ í™œìš©í•˜ì—¬ ë³€ê²½í•˜ê³ ì í•˜ëŠ” idxë¥¼ ë°›ì•„ í•´ë‹¹ ìœ„ì¹˜ì˜ ê°’ì„ {% hl_text orange %}set{% endhl_text %}ë¡œ ìˆ˜ì •í•˜ëŠ”ë°{% hl_text orange %}get{% endhl_text %}ë¥¼ ì‚¬ìš©í•´ í˜„ì¬ ê°’ì„ ë°›ì•„ ë³€ê²½í•©ë‹ˆë‹¤.
{% alert info %}
ê²Œë‹¤ê°€ ë” ë¹ ë¥´ë‹¤ê³  í•©ë‹ˆë‹¤.
http://blog.klipse.tech/javascript/2016/06/23/immutable-perf.html
{% endalert %}
### immutable.js ê°„ë‹¨ ì‚¬ìš©ë²•

##### 1. ë°ì´í„° ìƒì„±

immutableì„ ì‚¬ìš©í•˜ë©´ ê°ì²´ëŠ” MAPìœ¼ë¡œ ê°ì‹¸ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.
ë°°ì—´ì˜ ê²½ìš°ì—ëŠ” Listë¡œ ê°ì‹¸ì¤ë‹ˆë‹¤.

```javascript
// basic object
var data = {
  a: 1,
  b: 2,
  c: {
    d: 3,
    e: 4,
    f: 5
  }
}

// use immutable.js
var Map = Immutable.Map;
var data = Map({
  a: 1,
  b: 2,
  c: Map({
    d: 3,
    e: 4,
    f: 5
  })
})
```



##### 2. ë°ì´í„° ì½ê¸°

```javascript
/* ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ë¡œ ë³€í™˜í•˜ê¸° */
data.toJS(); // { a:1, b:2, c: { d: 3, e: 4, f: 5 } }

/* íŠ¹ì • í‚¤ì˜ ê°’ ì–»ì–´ì˜¤ê¸° */
data.get('a'); // 1

/* ë‚´ë¶€ì˜ í‚¤ì˜ ê°’ ì–»ì–´ì˜¤ê¸° */
data.getIn(['c', 'd']) // 3
```

##### 3. ë°ì´í„° ìˆ˜ì •

```javascript
/* ê°’ ì„¤ì •í•˜ê¸° */
var newData = data.set('a', 4);

/* ë‚´ë¶€ì˜ ê°’ ì„¤ì •í•˜ê¸° */
var newData = data.setIn(['c', 'd'], 10);

/* ë‚´ë¶€ì˜ ê°ì²´ë¥¼ ì„¤ì •í•˜ê¸° */
var newData = data.set('c', Map({ d: 10, e: 10, f: 10 }))

/* ê°’ ì—¬ëŸ¬ê°œ ì„¤ì •í•˜ê¸° */
var newData = data.merge({ a: 10, b: 10 })

/* nestëœ í‚¤ì— ê°’ ì—¬ëŸ¬ê°œ ì„¤ì •í•˜ê¸° */
var newData = data.mergeIn(['c'], { d: 10, e: 10 });

/* List ì¼ê²½ìš° ê°’ ì¶”ê°€í•˜ê¸° */
var newList = list.push(Map({value: 3}))

/* List ì¼ê²½ìš° ê°’ ì•ì— ì¶”ê°€í•˜ê¸° */
var newList = list.unshift(Map({value: 0}))
```

##### 4. ë°ì´í„° ì‚­ì œ 

```javascript
/* ì•„ì´í…œ ì œê±° */
var newList = list.delete(1);

/* ê°€ì¥ ë§ˆì§€ë§‰ ì•„ì´í…œ ì œê±° */
var newList = list.pop();
```

ê³µì‹ í˜ì´ì§€ : https://facebook.github.io/immutable-js/






